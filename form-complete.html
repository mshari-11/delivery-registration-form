<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=3.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>نموذج تسجيل مناديب التوصيل - شركة الخط الأول</title>
    <style>
        /* إعدادات الطباعة المحسنة */
        @page {
            size: A4;
            margin: 5mm;
        }
        
        /* الخطوط والألوان - ثيم الشركة */
        :root {
            --primary-color: #1a365d;
            --secondary-color: #2c5282;
            --accent-color: #3182ce;
            --success-color: #38a169;
            --danger-color: #e53e3e;
            --warning-color: #d69e2e;
            --light-bg: #f7fafc;
            --border-color: #e2e8f0;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --company-blue: #1a365d;
            --company-light-blue: #bee3f8;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background-color: #f3f4f6;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            position: relative;
            min-height: 100vh;
        }
        
        /* رأس الصفحة - ثيم الشركة */
        .company-header {
            background: linear-gradient(135deg, var(--company-blue) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
            color: white;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .company-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 50%;
        }
        
        .company-header::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .company-info h1 {
            font-size: 28px;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .company-info p {
            font-size: 14px;
            opacity: 0.9;
            margin: 2px 0;
        }
        
        .logo-wrapper {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .logo-wrapper svg {
            width: 60px;
            height: 60px;
            fill: var(--primary-color);
        }
        
        .form-number {
            position: absolute;
            top: 10px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        /* محتوى النموذج */
        .form-content {
            padding: 30px;
            padding-bottom: 120px;
        }
        
        /* عنوان النموذج */
        .form-title {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--light-bg);
            border-radius: 10px;
            border: 2px solid var(--border-color);
        }
        
        .form-title h2 {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .form-title .date-input {
            display: inline-block;
            margin-top: 10px;
        }
        
        .form-title input[type="date"] {
            padding: 8px 20px;
            border: 2px solid var(--secondary-color);
            border-radius: 5px;
            font-size: 14px;
            color: var(--text-primary);
        }
        
        /* الأقسام */
        .section {
            margin-bottom: 30px;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .section:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-color: var(--secondary-color);
        }
        
        .section-header {
            background: var(--light-bg);
            padding: 15px 25px;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .section-icon {
            width: 40px;
            height: 40px;
            background: var(--company-blue);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .section-icon svg {
            width: 24px;
            height: 24px;
            fill: white;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        
        .section-content {
            padding: 25px;
        }
        
        /* الحقول */
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-col {
            flex: 1;
        }
        
        .form-col-full {
            flex: 1 1 100%;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .required {
            color: var(--danger-color);
            margin-right: 3px;
        }
        
        input[type="text"],
        input[type="tel"],
        input[type="email"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            touch-action: manipulation;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        input:valid {
            border-color: var(--success-color);
        }
        
        /* خانات الاختيار */
        .checkbox-group {
            display: flex;
            align-items: start;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--light-bg);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .checkbox-group:hover {
            background: #e5e7eb;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-left: 12px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .checkbox-group label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
            line-height: 1.5;
        }
        
        /* رفع الملفات */
        .file-upload-wrapper {
            margin-bottom: 20px;
        }
        
        .file-upload-box {
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            background: var(--light-bg);
            transition: all 0.3s ease;
        }
        
        .file-upload-box:hover {
            border-color: var(--secondary-color);
            background: #eff6ff;
        }
        
        .file-upload-box.has-file {
            border-color: var(--success-color);
            background: #f0fdf4;
        }
        
        .upload-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--secondary-color);
            color: white;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            font-size: 14px;
        }
        
        .upload-btn:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }
        
        .upload-btn svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .file-name {
            margin-top: 10px;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .file-upload-box.has-file .file-name {
            color: var(--success-color);
            font-weight: 600;
        }
        
        /* الجداول */
        .table-wrapper {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid var(--border-color);
        }
        
        .fees-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .fees-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .fees-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .fees-table tr:nth-child(even) {
            background: var(--light-bg);
        }
        
        .fees-table tr:hover {
            background: #eff6ff;
        }
        
        /* الصناديق التحذيرية */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .alert-warning {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            color: #92400e;
        }
        
        .alert-info {
            background: #dbeafe;
            border: 2px solid #60a5fa;
            color: #1e40af;
        }
        
        .alert-success {
            background: #d1fae5;
            border: 2px solid #34d399;
            color: #065f46;
        }
        
        .alert svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
            flex-shrink: 0;
        }
        
        /* نصوص الاتفاقية */
        .agreement-box {
            background: var(--light-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 25px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }
        
        .agreement-box h3 {
            color: var(--primary-color);
            font-size: 16px;
            margin: 20px 0 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .agreement-box p,
        .agreement-box li {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .agreement-box ul,
        .agreement-box ol {
            padding-right: 30px;
            margin: 10px 0;
        }
        
        /* منطقة التوقيع الرقمي */
        .signature-section {
            background: var(--light-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .verification-section {
            background: white;
            border: 2px solid var(--secondary-color);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .verification-step {
            margin-bottom: 20px;
        }
        
        .timer-display {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #fef3c7;
            border-radius: 8px;
            color: #92400e;
        }
        
        .face-capture-section {
            background: white;
            border: 2px solid var(--success-color);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .camera-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .camera-box {
            width: 320px;
            height: 240px;
            border: 3px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .camera-placeholder {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .camera-placeholder:hover {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .camera-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .final-signature-section {
            background: #f0fdf4;
            border: 2px solid var(--success-color);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .verification-status {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .status-value {
            font-weight: 600;
        }
        
        .status-value.verified {
            color: var(--success-color);
        }
        
        .signature-grid {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        
        .signature-box {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
        }
        
        .signature-box h4 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 16px;
        }
        
        .signature-field {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .signature-field input {
            margin-top: 8px;
        }
        
        .signature-area {
            height: 100px;
            border: 2px dashed var(--text-secondary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            background: var(--light-bg);
            margin-top: 10px;
        }
        
        /* الأزرار */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            min-height: 44px;
        }
        
        .btn-primary {
            background: var(--company-blue);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(26, 54, 93, 0.3);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background: #2f855a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(56, 161, 105, 0.3);
        }
        
        .btn-secondary {
            background: var(--text-secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }
        
        /* التذييل */
        .footer {
            background: var(--company-blue);
            color: white;
            padding: 30px;
            text-align: center;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .footer-item {
            font-size: 13px;
        }
        
        .footer-item strong {
            margin-left: 5px;
        }
        
        /* التطبيقات الخاصة */
        .app-details {
            background: #eff6ff;
            border: 2px solid var(--secondary-color);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .app-details h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .app-details ul {
            padding-right: 25px;
        }
        
        .app-details li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        /* تعهد STC Pay */
        .stc-commitment-section {
            margin-top: 25px;
            padding: 20px;
            background: var(--company-light-blue);
            border: 2px solid var(--company-blue);
            border-radius: 12px;
        }
        
        .stc-commitment-text {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-primary);
            border-right: 4px solid var(--warning-color);
        }
        
        .stc-agreement {
            margin-top: 20px;
            background: white;
            border: 2px solid var(--company-blue);
            border-radius: 8px;
            padding: 20px;
        }
        
        .stc-agreement label {
            color: var(--company-blue);
            font-weight: 600;
            font-size: 15px;
        }
        
        .stc-agreement input[type="checkbox"] {
            width: 24px;
            height: 24px;
            accent-color: var(--company-blue);
        }
        .promissory-section {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            margin: 20px 0;
        }
        
        .promissory-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: #f59e0b;
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .promissory-link:hover {
            background: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }
        
        /* ملخص البيانات */
        .summary-section {
            background: #f0fdf4;
            border: 2px solid var(--success-color);
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .summary-item strong {
            display: block;
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .summary-item span {
            font-size: 16px;
            color: var(--text-primary);
            font-weight: 600;
        }
        
        /* تخصيص للطباعة */
        @media print {
            body {
                background: white;
                font-size: 12px;
                line-height: 1.4;
            }
            
            .container {
                box-shadow: none;
                max-width: none;
                margin: 0;
                padding: 0;
            }
            
            .btn,
            .no-print {
                display: none !important;
            }
            
            .section {
                page-break-inside: avoid;
                border: 1px solid #000;
                margin-bottom: 15px;
            }
            
            .section-header {
                padding: 10px 15px;
                background: #f5f5f5 !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .section-content {
                padding: 15px;
            }
            
            .form-content {
                padding: 10px;
                padding-bottom: 20px;
            }
            
            .company-header {
                padding: 15px;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .agreement-box {
                max-height: none !important;
                padding: 15px;
                font-size: 11px;
            }
            
            .footer {
                padding: 15px;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                position: relative;
                margin-top: 20px;
            }
            
            .form-row {
                margin-bottom: 10px;
            }
            
            .signature-section {
                padding: 15px;
            }
            
            .alert {
                padding: 10px 15px;
            }
        }
        
        /* تجاوب الشاشات الصغيرة والجوال */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }
            
            .container {
                margin: 0;
                border-radius: 0;
                min-height: auto;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .signature-grid,
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .company-info h1 {
                font-size: 22px;
            }
            
            .form-content {
                padding: 15px;
                padding-bottom: 80px;
            }
            
            .section-header {
                padding: 12px 15px;
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .section-content {
                padding: 15px;
            }
            
            .button-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
                padding: 18px 20px;
                font-size: 18px;
            }
            
            .agreement-box {
                max-height: 300px;
                font-size: 15px;
            }
            
            .form-title {
                padding: 15px;
                margin-bottom: 25px;
            }
            
            .form-title h2 {
                font-size: 20px;
            }
            
            .section-title {
                font-size: 16px;
            }
            
            input[type="text"],
            input[type="tel"],
            input[type="email"],
            input[type="date"],
            select,
            textarea {
                padding: 15px;
                font-size: 16px;
            }
            
            label {
                font-size: 16px;
                margin-bottom: 10px;
            }
            
            .checkbox-group {
                padding: 15px;
            }
            
            .checkbox-group label {
                font-size: 15px;
                line-height: 1.6;
            }
            
            .upload-btn {
                padding: 15px 25px;
                font-size: 16px;
            }
            
            .file-upload-box {
                padding: 25px 15px;
            }
            
            .footer {
                padding: 20px 15px;
                position: relative;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 15px;
            }
        }
        
        /* تحسينات إضافية للشاشات الصغيرة جداً */
        @media (max-width: 480px) {
            body {
                font-size: 15px;
            }
            
            .company-header {
                padding: 15px 10px;
            }
            
            .company-info h1 {
                font-size: 18px;
            }
            
            .company-info p {
                font-size: 12px;
            }
            
            .form-content {
                padding: 10px;
                padding-bottom: 60px;
            }
            
            .section {
                border-radius: 8px;
            }
            
            .section-content {
                padding: 12px;
            }
            
            .form-title h2 {
                font-size: 18px;
            }
            
            .btn {
                padding: 16px 15px;
                font-size: 16px;
            }
            
            .agreement-box {
                font-size: 14px;
                padding: 15px;
            }
            
            .logo-wrapper {
                padding: 15px;
            }
            
            .logo-wrapper svg {
                width: 40px;
                height: 40px;
            }
        }
        
        /* تأثيرات إضافية */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* شريط التقدم */
        .progress-bar {
            height: 4px;
            background: var(--border-color);
            position: relative;
            margin-bottom: 30px;
            border-radius: 2px;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success-color);
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        /* رمز التحقق */
        .validation-badge {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--success-color);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            display: none;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(5, 150, 105, 0.3);
            z-index: 1000;
        }
        
        .validation-badge.show {
            display: flex;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- رأس الصفحة -->
        <header class="company-header">
            <div class="form-number">نموذج رقم: FL-REG-2025-001</div>
            <div class="header-content">
                <div class="company-info">
                    <h1>شركة الخط الأول للخدمات اللوجستية</h1>
                    <p>FIRST LINE LOGISTICS SERVICES CO.</p>
                    <p>س.ت: 4030370057 | الرقم الضريبي: 311174371700003</p>
                    <p>المملكة العربية السعودية - جدة</p>
                </div>
                <div class="logo-wrapper">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                </div>
            </div>
        </header>

        <!-- محتوى النموذج -->
        <div class="form-content">
            <!-- عنوان النموذج -->
            <div class="form-title fade-in">
                <h2>نموذج تسجيل مندوب توصيل متعاون</h2>
                <div class="date-input">
                    <label>التاريخ:</label>
                    <input type="date" id="formDate" required>
                </div>
            </div>

            <!-- شريط التقدم -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>

            <!-- القسم الأول: البيانات الشخصية -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">البيانات الشخصية للمندوب</h3>
                </div>
                <div class="section-content">
                    <div class="form-row">
                        <div class="form-col">
                            <label>الاسم الكامل <span class="required">*</span></label>
                            <input type="text" id="fullName" required placeholder="الاسم رباعي كاملاً">
                        </div>
                        <div class="form-col">
                            <label>رقم الهوية/الإقامة <span class="required">*</span></label>
                            <input type="text" id="idNumber" pattern="[0-9]{10}" required placeholder="10 أرقام">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label>تاريخ انتهاء الهوية <span class="required">*</span></label>
                            <input type="date" id="idExpiry" required>
                        </div>
                        <div class="form-col">
                            <label>الجنسية <span class="required">*</span></label>
                            <input type="text" id="nationality" required placeholder="مثال: سعودي">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label>رقم الجوال الأساسي <span class="required">*</span></label>
                            <input type="tel" id="primaryPhone" pattern="05[0-9]{8}" required placeholder="05XXXXXXXX">
                        </div>
                        <div class="form-col">
                            <label>رقم جوال إضافي</label>
                            <input type="tel" id="secondaryPhone" pattern="05[0-9]{8}" placeholder="05XXXXXXXX">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col-full">
                            <label>العنوان الكامل <span class="required">*</span></label>
                            <div class="form-row">
                                <div class="form-col">
                                    <input type="text" id="city" required placeholder="المدينة">
                                </div>
                                <div class="form-col">
                                    <input type="text" id="district" required placeholder="الحي">
                                </div>
                                <div class="form-col">
                                    <input type="text" id="street" required placeholder="الشارع">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم الثاني: بيانات المركبة -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">بيانات المركبة</h3>
                </div>
                <div class="section-content">
                    <div class="form-row">
                        <div class="form-col">
                            <label>نوع السيارة <span class="required">*</span></label>
                            <input type="text" id="carType" required placeholder="مثال: تويوتا كامري">
                        </div>
                        <div class="form-col">
                            <label>رقم اللوحة <span class="required">*</span></label>
                            <input type="text" id="plateNumber" required placeholder="مثال: أ ب ج 1234">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label>لون السيارة <span class="required">*</span></label>
                            <input type="text" id="carColor" required placeholder="مثال: أبيض">
                        </div>
                        <div class="form-col">
                            <label>سنة الصنع <span class="required">*</span></label>
                            <input type="text" id="carYear" pattern="[0-9]{4}" required placeholder="2020">
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم الثالث: اختيار التطبيق -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">اختيار التطبيق والشروط الخاصة</h3>
                </div>
                <div class="section-content">
                    <div class="form-row">
                        <div class="form-col">
                            <label>اختر التطبيق <span class="required">*</span></label>
                            <select id="appSelect" required onchange="showAppDetails()">
                                <option value="">-- اختر التطبيق --</option>
                                <option value="kita">كيتا (Kita) - نظام بالطلب</option>
                                <option value="jahez">جاهز (Jahez)</option>
                                <option value="thechefz">ذا شفز (The Chefz)</option>
                                <option value="mrsool">مرسول (Marsool)</option>
                            </select>
                        </div>
                        <div class="form-col">
                            <label>رقم حساب STC Pay <span class="required">*</span></label>
                            <input type="tel" id="stcPayNumber" pattern="05[0-9]{8}" required placeholder="05XXXXXXXX">
                        </div>
                    </div>
                    
                    <!-- تعهد STC Pay -->
                    <div class="stc-pledge-section">
                        <div class="alert alert-warning">
                            <svg viewBox="0 0 24 24">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            <div>
                                <strong>تعهد مهم بخصوص رقم حساب STC Pay:</strong>
                                <p style="margin-top: 10px; line-height: 1.8;">
                                    أتعهد بأن رقم حساب STC Pay المذكور أعلاه يعود لي شخصياً وباسمي، وأن جميع المعلومات المقدمة صحيحة ودقيقة. 
                                    كما أدرك أنه في حالة مخالفة ذلك أو تقديم معلومات مزورة أو مضللة، فإنني أُعتبر مخالفاً لنظام مكافحة التزوير والاحتيال المالي 
                                    في المملكة العربية السعودية، وأكون عرضة للعقوبات القانونية المنصوص عليها في الأنظمة واللوائح السارية، 
                                    بما في ذلك الغرامات المالية والعقوبات الجزائية وفقاً لنظام مكافحة جرائم المعلوماتية ونظام مكافحة غسل الأموال.
                                </p>
                            </div>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="stcPledge" required>
                            <label for="stcPledge">
                                <strong>أقر وأتعهد بصحة المعلومات المتعلقة برقم حساب STC Pay وأتحمل كامل المسؤولية القانونية في حالة مخالفة ذلك</strong>
                            </label>
                        </div>
                    </div>
                    
                    <!-- تعهد STC Pay -->
                    <div class="stc-commitment-section">
                        <div class="alert alert-warning">
                            <svg viewBox="0 0 24 24">
                                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                            </svg>
                            <div>
                                <strong>تعهد مهم بخصوص رقم STC Pay:</strong>
                                <div class="stc-commitment-text">
                                    أتعهد وأقر بأن رقم حساب STC Pay المدخل أعلاه يعود لي شخصياً وهو مسجل باسمي الشخصي وبهويتي المرفقة، وأتحمل كامل المسؤولية عن صحة هذه البيانات. كما أقر بأنني على علم تام بأن في حالة ثبوت مخالفة ذلك أو تقديم بيانات مزورة أو خاطئة، فإنني أعرض نفسي للمساءلة القانونية وفقاً لنظام مكافحة التزوير والغش في المملكة العربية السعودية، وأتحمل كافة العقوبات القانونية المترتبة على ذلك.
                                </div>
                            </div>
                        </div>
                        
                        <div class="checkbox-group stc-agreement">
                            <input type="checkbox" id="stcCommitment" required>
                            <label for="stcCommitment">
                                <strong>أوافق على التعهد أعلاه وأقر بأن رقم STC Pay يعود لي شخصياً وأتحمل المسؤولية القانونية الكاملة عن صحة البيانات</strong>
                                <span class="required">*</span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="appDetails" style="display: none;"></div>
                </div>
            </div>

            <!-- القسم الرابع: المستندات المطلوبة -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">المستندات المطلوبة</h3>
                </div>
                <div class="section-content">
                    <div class="alert alert-warning">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                        </svg>
                        <span>يجب رفع جميع المستندات بصيغة PDF أو صورة واضحة</span>
                    </div>
                    
                    <div class="file-upload-wrapper">
                        <label>صورة الهوية الوطنية / الإقامة (وجهين) <span class="required">*</span></label>
                        <div class="file-upload-box" id="idFileBox">
                            <label class="upload-btn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                                </svg>
                                رفع الملف
                                <input type="file" id="idFile" accept=".pdf,.jpg,.jpeg,.png" required onchange="handleFileSelect('idFile', 'idFileBox', 'idFileName')">
                            </label>
                            <div class="file-name" id="idFileName">لم يتم اختيار ملف</div>
                        </div>
                    </div>
                    
                    <div class="file-upload-wrapper">
                        <label>صورة رخصة القيادة سارية المفعول <span class="required">*</span></label>
                        <div class="file-upload-box" id="licenseFileBox">
                            <label class="upload-btn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                                </svg>
                                رفع الملف
                                <input type="file" id="licenseFile" accept=".pdf,.jpg,.jpeg,.png" required onchange="handleFileSelect('licenseFile', 'licenseFileBox', 'licenseFileName')">
                            </label>
                            <div class="file-name" id="licenseFileName">لم يتم اختيار ملف</div>
                        </div>
                    </div>
                    
                    <div class="file-upload-wrapper">
                        <label>صورة رخصة السير (استمارة السيارة) <span class="required">*</span></label>
                        <div class="file-upload-box" id="registrationFileBox">
                            <label class="upload-btn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                                </svg>
                                رفع الملف
                                <input type="file" id="registrationFile" accept=".pdf,.jpg,.jpeg,.png" required onchange="handleFileSelect('registrationFile', 'registrationFileBox', 'registrationFileName')">
                            </label>
                            <div class="file-name" id="registrationFileName">لم يتم اختيار ملف</div>
                        </div>
                    </div>
                    

                </div>
            </div>

            <!-- القسم الخامس: السند لأمر -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16h-2v-4h2v4zm0-6h-2V7h2v5z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">السند لأمر</h3>
                </div>
                <div class="section-content">
                    <div class="promissory-section">
                        <p>يجب توقيع السند لأمر الخاص بالتطبيق المختار</p>
                        <div id="promissoryLinkContainer">
                            <p>يرجى اختيار التطبيق أولاً لعرض رابط السند لأمر</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم السادس: الالتزامات والتعهدات -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">الالتزامات والتعهدات</h3>
                </div>
                <div class="section-content">
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment1" required>
                        <label for="commitment1">أتعهد بالمحافظة على النظافة الشخصية (الشعر، الأظافر، الرائحة، الملابس، الحذاء اللائق) ونظافة السيارة</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment2" required>
                        <label for="commitment2">أتعهد بعدم التدخين أثناء نقل الطلبات</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment3" required>
                        <label for="commitment3">أتعهد باستعمال الزي الموحد للعمل وحسن المظهر</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment4" required>
                        <label for="commitment4">أتعهد بالمحافظة على الطلبات الموصلة وتحمل المسؤولية الكاملة في حال تضررها</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment5" required>
                        <label for="commitment5">أتعهد بحمل حافظة الطعام إلى المتجر أو المطعم ووضع الأكل فيها وحملها للعميل</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment6" required>
                        <label for="commitment6">أقر بأن البيانات المدخلة صحيحة وأتحمل كامل المسؤولية في حال وجود خطأ</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment7" required>
                        <label for="commitment7">أقر بأن العلاقة تجارية وليست وظيفية وأنني متعاون مستقل حر</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commitment8" required>
                        <label for="commitment8">أقر بأنني قرأت وفهمت جميع بنود الاتفاقية وأوافق عليها</label>
                    </div>
                </div>
            </div>

            <!-- القسم السابع: بنود الاتفاقية -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">بنود الاتفاقية الأساسية</h3>
                </div>
                <div class="section-content">
                    <div class="agreement-box">
                        <h3>المادة (1): موضوع الاتفاقية</h3>
                        <p>يقر المندوب برغبته في تقديم خدمات التوصيل كمندوب مستقل باستخدام وسيلة نقل مملوكة له أو مستأجرة لصالح الشركة، دون نشوء علاقة عمل وظيفية، وإنما علاقة تجارية حرة منظمة بهذه الاتفاقية.</p>
                        
                        <h3>المادة (2): طبيعة العلاقة</h3>
                        <p>العلاقة تجارية مستقلة، لا يخضع المندوب لإشراف مباشر، ولا تترتب على الشركة أي التزامات مالية أو نظامية كالإجازات أو التأمينات.</p>
                        
                        <h3>المادة (3): المقابل المالي</h3>
                        <p>يُحدد بناءً على عدد الطلبات المنجزة، ويُصرف بعد التحقق من صحة التنفيذ. ويحق للشركة حسم أي مبالغ بسبب الإهمال أو الشكاوى.</p>
                        
                        <h3>المادة (4): الضمان المالي والسند لأمر</h3>
                        <p>يوقع المندوب على سند لأمر يُستخدم في حالات: عدم تسليم المبالغ المحصلة، التسبب بضرر مادي، أو الانقطاع عن العمل دون تواصل لأكثر من 15 يوماً.</p>
                        
                        <h3>المادة (5): التزامات المندوب</h3>
                        <ul>
                            <li>الحفاظ على النظافة الشخصية ونظافة المركبة</li>
                            <li>عدم التدخين أثناء التوصيل</li>
                            <li>استخدام التطبيق وإثبات التحصيل</li>
                            <li>تسليم المبالغ المحصلة عند بلوغها الحد المطلوب</li>
                            <li>عدم تسريب بيانات العملاء أو استخدام اسم الشركة دون إذن</li>
                        </ul>
                        
                        <h3>المادة (6): الإقرار</h3>
                        <p>يقر المندوب بأنه لا يحق له المطالبة بأي حقوق وظيفية.</p>
                        
                        <h3>المادة (7): مدة الاتفاقية</h3>
                        <p>سارية من تاريخ التوقيع، وقابلة للإنهاء بإشعار كتابي قبل 7 أيام، أو فوراً في حال الإخلال الجوهري بأي بند.</p>
                        
                        <h3>المادة (8): النزاعات</h3>
                        <p>تحال النزاعات إلى المحكمة التجارية المختصة بمدينة جدة.</p>
                        
                        <h3>المادة (9): المستندات المرفقة</h3>
                        <p>سند لأمر - صورة الهوية - رقم الحساب البنكي أو وسيلة الدفع.</p>
                        
                        <h3>المادة (10): السكن</h3>
                        <p>يلتزم المندوب بإخلاء السكن التابع للشركة فور انتهاء العلاقة التعاقدية، ويتحمل مبلغ (100 ريال سعودي) عن كل يوم تأخير. ويقر بتفويض الشركة باستخدام الجهات الأمنية لإخلائه دون إنذار.</p>
                        
                        <h3>المادة (11): التبليغات</h3>
                        <p>تُرسل الإشعارات عبر الجوال أو البريد الإلكتروني الرسمي المسجل، وتُعد ملزمة قانوناً.</p>
                        
                        <h3>المادة (12): التفويض التنفيذي</h3>
                        <p>يفوض المندوب الشركة باستخدام السند لأمر أو الرجوع مباشرة للجهات التنفيذية دون الحاجة لحكم قضائي.</p>
                    </div>
                </div>
            </div>

            <!-- القسم الثامن: الملحق التنظيمي -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">الملحق التنظيمي لاتفاقية خدمات التوصيل</h3>
                </div>
                <div class="section-content">
                    <div class="agreement-box">
                        <p>يُعد هذا الملحق جزءاً لا يتجزأ من الاتفاقية الأساسية، ويهدف إلى تنظيم العلاقة النظامية والتنفيذية على النحو الآتي:</p>
                        
                        <h3>أولاً: طبيعة العلاقة</h3>
                        <p>العلاقة تجارية بحتة لا تخضع لأي تنظيم وظيفي أو عمالي، ويعمل المندوب بصفته متعاون مستقل حر.</p>
                        
                        <h3>ثانياً: العلاقة بالسكن</h3>
                        <p>السكن امتياز مرتبط بالعلاقة التعاقدية، وينتهي بانتهائها تلقائياً. الإخلاء خلال 7 أيام، والغرامة (100 ريال) في كل يوم بعد المهلة المحددة.</p>
                        
                        <h3>ثالثاً: التدابير التنفيذية</h3>
                        <p>يُفوض المندوب الشركة باتخاذ ما تراه من إجراءات قانونية، تنفيذية، أو أمنية لحماية ممتلكاتها دون الرجوع إليه.</p>
                        
                        <h3>رابعاً: التبليغات</h3>
                        <p>أي تبليغ يُرسل عبر رقم الجوال أو البريد الإلكتروني المسجل يُعد ملزماً ومنتجاً لآثاره القانونية.</p>
                        
                        <h3>خامساً: الإقامة والتصاريح</h3>
                        <p>الإقامة مرتبطة بالعلاقة التعاقدية، وتُلغى فور انتهائها. ولا تتحمل الشركة أي تبعات نظامية لاحقة.</p>
                        
                        <h3>سادساً: الإطار التنظيمي والشرطي</h3>
                        <p>وفق نظام النقل وبما يتعلق بمناديب التوصيل المستقلين والمركبات واستناداً إلى لوائح الهيئة العامة للنقل السعودي الخفيفة، يُقر المندوب بما يلي:</p>
                        <ol>
                            <li>أن نشاطه يخضع لتنظيم الهيئة العامة للنقل، ويعمل وفق اشتراطات تقديم خدمات التوصيل، وتلتزم الشركة بتوفير بيئة تشغيل متوافقة مع المعايير المعتمدة.</li>
                            <li>يتعهد المندوب بتنفيذ مهامه بصفته الشخصية، وبواسطة مركبة مرخصة أصولاً، وحاصلة على موافقة المرور للاستخدام التجاري، مع التأكيد على أن العلاقة بينه وبين الشركة تجارية فقط ولا تمثل علاقة توظيف.</li>
                            <li>في حال صدور أي متطلبات تنظيمية جديدة من الهيئة (مثل: الربط عبر أنظمة التحقق الوطني، أو تسجيل الأعراف التشغيلية)، يلتزم المندوب بالتقيد بها فور إشعاره من قِبل الشركة دون تأخير.</li>
                            <li>يُعد هذا البند تأكيداً على أن العلاقة تخضع بالكامل لأحكام النظام التجاري السعودي، ولوائح النقل ذات العلاقة، ولا تترتب عليها أي آثار ناتجة عن الأنظمة العمالية أو الوظيفية أو التأمينية.</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- القسم التاسع: الإعفاء من المسؤولية -->
            <div class="section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">الإعفاء من المسؤولية</h3>
                </div>
                <div class="section-content">
                    <div class="alert alert-warning">
                        <svg viewBox="0 0 24 24">
                            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                        </svg>
                        <div>
                            <strong>يقر المندوب بما يلي:</strong>
                            <ul style="margin-top: 10px; padding-right: 20px;">
                                <li>الشركة خالية من المسؤولية عن أي أضرار في المنقولات، أو المركبات، أو تأخيرات، أو غرامات، أو عقوبات تكون صادرة من المندوب</li>
                                <li>الغرامات والعقوبات المتضمنة لدى نظام المخالفات في التطبيق هي مسؤولية المندوب بشكل تام</li>
                                <li>صحة المستندات والوثائق والتقارير الصادرة من التطبيق دون تحميل الشركة المسؤولية عن صحتها</li>
                                <li>دور الشركة يقتصر على الوساطة التشغيلية والربط التقني فقط</li>
                                <li>الشركة لا تتحمل أي مسؤولية مالية أو تشغيلية تتعلق بالجوانب المذكورة في العقد</li>
                                <li>في حال ترتب على الشركة أي مطالبات أو غرامات بسبب إخلال المندوب، يتعهد المندوب بتحمل كامل هذه المسؤوليات وتعويض الشركة خلال 7 أيام عمل</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم العاشر: ملخص البيانات -->
            <div class="summary-section fade-in">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">ملخص البيانات المدخلة</h3>
                </div>
                <div class="section-content">
                    <div class="summary-grid">
                        <div class="summary-item">
                            <strong>التطبيق المختار</strong>
                            <span id="summaryApp">-</span>
                        </div>
                        <div class="summary-item">
                            <strong>قيمة السند لأمر</strong>
                            <span id="summaryPromissory">-</span>
                        </div>
                        <div class="summary-item">
                            <strong>رقم حساب STC Pay</strong>
                            <span id="summaryStc">-</span>
                        </div>
                        <div class="summary-item">
                            <strong>حالة المستندات</strong>
                            <span id="summaryDocs" style="color: var(--danger-color)">غير مكتملة</span>
                        </div>
                    </div>
                    
                    <div class="alert alert-info" style="margin-top: 20px;">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <div>
                            <strong>قائمة المرفقات:</strong>
                            <div style="display: flex; gap: 20px; margin-top: 10px; flex-wrap: wrap;">
                                <label style="display: flex; align-items: center; gap: 5px;">
                                    <input type="checkbox" disabled id="checkId">
                                    صورة الهوية/الإقامة
                                </label>
                                <label style="display: flex; align-items: center; gap: 5px;">
                                    <input type="checkbox" disabled id="checkLicense">
                                    رخصة القيادة
                                </label>
                                <label style="display: flex; align-items: center; gap: 5px;">
                                    <input type="checkbox" disabled id="checkRegistration">
                                    رخصة السير
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- القسم الحادي عشر: البنود الإضافية حسب التطبيق -->
            <div id="additionalTermsSection" class="section fade-in" style="display: none;">
                <div class="section-header">
                    <div class="section-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </div>
                    <h3 class="section-title">البنود الإضافية الخاصة بالتطبيق</h3>
                </div>
                <div class="section-content">
                    <div id="additionalTermsContent" class="agreement-box">
                        <!-- سيتم ملؤها بناءً على التطبيق المختار -->
                    </div>
                </div>
            </div>

            <!-- القسم الثاني عشر: التحقق الرقمي والإقرار -->
            <div class="signature-section fade-in">
                <h3 style="text-align: center; color: var(--primary-color); margin-bottom: 20px;">إقرار وموافقة المندوب</h3>
                <div class="alert alert-success">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span><strong>إقرار نهائي:</strong> أقر أنا الموقع أدناه بأنني قرأت وفهمت هذه الاتفاقية وجميع ملحقاتها وأوافق على كافة بنودها بإرادتي الحرة ودون أي تحفظ</span>
                </div>

                <!-- الخطوة الأولى: التحقق من رقم الجوال -->
                <div class="verification-section" id="mobileVerificationSection">
                    <h4 style="color: var(--secondary-color); margin-bottom: 15px;">
                        <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: currentColor; margin-left: 10px;">
                            <path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
                        </svg>
                        الخطوة الأولى: التحقق من رقم الجوال
                    </h4>
                    
                    <div class="verification-step">
                        <label for="verificationMobile" class="form-label">رقم الجوال للتحقق (يجب أن يكون نفس الرقم المدخل أعلاه):</label>
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <input type="tel" id="verificationMobile" class="form-control" 
                                   placeholder="05xxxxxxxx" maxlength="10" pattern="05[0-9]{8}" 
                                   style="flex: 1; min-width: 200px;" readonly>
                            <button type="button" class="btn btn-secondary" id="sendCodeBtn" onclick="sendVerificationCode()" disabled>
                                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: currentColor;">
                                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                                </svg>
                                إرسال كود التحقق
                            </button>
                        </div>
                    </div>

                    <div class="verification-step" id="codeInputSection" style="display: none;">
                        <label for="verificationCode" class="form-label">كود التحقق:</label>
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <input type="text" id="verificationCode" class="form-control" 
                                   placeholder="أدخل الكود المكون من 6 أرقام" maxlength="6" pattern="[0-9]{6}"
                                   style="flex: 1; min-width: 200px;">
                            <button type="button" class="btn btn-primary" onclick="verifyCode()">
                                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: currentColor;">
                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                </svg>
                                تحقق
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resendCode()" id="resendBtn" disabled>
                                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: currentColor;">
                                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                                </svg>
                                إعادة الإرسال
                            </button>
                        </div>
                        <div class="timer-display" id="timerDisplay" style="display: none;">
                            سيتم تفعيل "إعادة الإرسال" خلال: <span id="countdown">60</span> ثانية
                        </div>
                    </div>

                    <div class="alert alert-info" id="codeSuccessAlert" style="display: none;">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span>تم التحقق من رقم الجوال بنجاح!</span>
                    </div>
                </div>

                <!-- الخطوة الثانية: رفع صورة الوجه -->
                <div class="face-capture-section" id="faceVerificationSection" style="display: none;">
                    <h4 style="color: var(--success-color); margin-bottom: 15px;">
                        <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: currentColor; margin-left: 10px;">
                            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.89 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H14V9H19V21Z"/>
                        </svg>
                        الخطوة الثانية: التقاط صورة الوجه للتحقق من الهوية
                    </h4>
                    
                    <div class="alert alert-info">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                        </svg>
                        <span>يرجى التأكد من وضوح وجهك في الصورة وأن تكون بنفس الهوية المرفقة</span>
                    </div>

                    <div class="camera-container">
                        <div class="camera-box" id="cameraBox">
                            <div class="camera-placeholder" onclick="openCamera()">
                                <svg viewBox="0 0 24 24" style="width: 48px; height: 48px; fill: var(--primary-color);">
                                    <path d="M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.41 2.72 6.23 6 6.72V21h2v-2.28c3.28-.49 6-3.31 6-6.72h-1.7z"/>
                                </svg>
                                <p style="margin: 10px 0; color: var(--text-secondary);">اضغط لفتح الكاميرا</p>
                            </div>
                            <video id="cameraVideo" style="width: 100%; height: 100%; object-fit: cover; display: none;" autoplay muted></video>
                            <canvas id="captureCanvas" style="display: none;"></canvas>
                            <img id="capturedImage" style="width: 100%; height: 100%; object-fit: cover; display: none;" alt="صورة الوجه المُلتقطة">
                        </div>

                        <div class="camera-controls">
                            <button type="button" class="btn btn-primary" id="captureBtn" onclick="capturePhoto()" style="display: none;">
                                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                    <path d="M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.41 2.72 6.23 6 6.72V21h2v-2.28c3.28-.49 6-3.31 6-6.72h-1.7z"/>
                                </svg>
                                التقاط الصورة
                            </button>
                            <button type="button" class="btn btn-secondary" id="retakeBtn" onclick="retakePhoto()" style="display: none;">
                                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6 6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                                </svg>
                                إعادة التقاط
                            </button>
                            <button type="button" class="btn btn-success" id="confirmPhotoBtn" onclick="confirmPhoto()" style="display: none;">
                                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                </svg>
                                تأكيد الصورة
                            </button>
                            <label for="facePhotoUpload" class="btn btn-secondary" style="cursor: pointer;">
                                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                    <path d="M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V9h-3V7H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"/>
                                </svg>
                                أو رفع من المعرض
                            </label>
                            <input type="file" id="facePhotoUpload" accept="image/*" style="display: none;" onchange="handlePhotoUpload(this)">
                        </div>
                    </div>

                    <div class="alert alert-success" id="photoSuccessAlert" style="display: none;">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span>تم تأكيد صورة الوجه بنجاح!</span>
                    </div>
                </div>

                <!-- ملخص التحقق النهائي -->
                <div class="final-signature-section" id="finalVerificationSection" style="display: none;">
                    <h4 style="color: var(--success-color); margin-bottom: 15px; text-align: center;">تم إتمام عملية التحقق بنجاح</h4>
                    
                    <div class="verification-status">
                        <div class="status-item">
                            <span class="status-label">اسم المندوب:</span>
                            <span class="status-value verified" id="finalName">-</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">رقم الهوية:</span>
                            <span class="status-value verified" id="finalId">-</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">رقم الجوال:</span>
                            <span class="status-value verified" id="finalMobile">-</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">التحقق من الجوال:</span>
                            <span class="status-value verified">✓ تم التحقق</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">صورة الوجه:</span>
                            <span class="status-value verified">✓ تم التأكيد</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">تاريخ التحقق:</span>
                            <span class="status-value verified" id="verificationDate">-</span>
                        </div>
                    </div>

                    <div class="alert alert-success" style="margin-top: 20px;">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span>تم التحقق من هوية المندوب بنجاح ويمكن المتابعة لإرسال النموذج</span>
                    </div>
                </div>
                

            </div>

            <!-- الأزرار -->
            <div class="button-group">
                <button class="btn btn-secondary no-print" onclick="window.print()">
                    <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                        <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM16 19H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>
                    </svg>
                    طباعة النموذج
                </button>
                <button class="btn btn-primary no-print" onclick="saveForm()">
                    <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    حفظ النموذج
                </button>
                <button class="btn btn-success no-print" onclick="submitForm()">
                    <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    إرسال النموذج
                </button>
            </div>
        </div>

        <!-- التذييل -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-item">
                    <strong>المقر الرئيسي:</strong> جدة - المملكة العربية السعودية
                </div>
                <div class="footer-item">
                    <strong>ص.ب:</strong> 12345 جدة 21473
                </div>
                <div class="footer-item">
                    <strong>هاتف:</strong> +966 12 123 4567
                </div>
                <div class="footer-item">
                    <strong>البريد:</strong> info@firstlinelog.com
                </div>
            </div>
        </footer>
    </div>

    <!-- شارة التحقق -->
    <div class="validation-badge" id="validationBadge">
        <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        <span>تم الحفظ بنجاح</span>
    </div>

    <script>
        // تعيين التاريخ الحالي
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('formDate').value = today;
            document.getElementById('signatureDate').value = today;
            
            // تحديث شريط التقدم
            updateProgress();
        });

        // معالج رفع الملفات
        function handleFileSelect(inputId, boxId, nameId) {
            const input = document.getElementById(inputId);
            const box = document.getElementById(boxId);
            const nameElement = document.getElementById(nameId);
            
            if (input.files && input.files[0]) {
                const fileName = input.files[0].name;
                nameElement.textContent = fileName;
                box.classList.add('has-file');
                
                // تحديث حالة المرفقات
                updateDocumentStatus();
                updateProgress();
            }
        }

        // تحديث حالة المستندات
        function updateDocumentStatus() {
            const idFile = document.getElementById('idFile').files.length > 0;
            const licenseFile = document.getElementById('licenseFile').files.length > 0;
            const registrationFile = document.getElementById('registrationFile').files.length > 0;
            
            document.getElementById('checkId').checked = idFile;
            document.getElementById('checkLicense').checked = licenseFile;
            document.getElementById('checkRegistration').checked = registrationFile;
            
            const allUploaded = idFile && licenseFile && registrationFile;
            const docsStatus = document.getElementById('summaryDocs');
            
            if (allUploaded) {
                docsStatus.textContent = 'مكتملة';
                docsStatus.style.color = 'var(--success-color)';
            } else {
                docsStatus.textContent = 'غير مكتملة';
                docsStatus.style.color = 'var(--danger-color)';
            }
        }

        // إظهار تفاصيل التطبيق
        function showAppDetails() {
            const app = document.getElementById('appSelect').value;
            const detailsContainer = document.getElementById('appDetails');
            const promissoryContainer = document.getElementById('promissoryLinkContainer');
            const additionalTermsSection = document.getElementById('additionalTermsSection');
            const additionalTermsContent = document.getElementById('additionalTermsContent');
            
            let details = '';
            let promissoryLink = '';
            let promissoryAmount = '';
            let additionalTerms = '';
            
            switch(app) {
                case 'kita':
                    promissoryAmount = '5,000 ريال';
                    details = `
                        <div class="app-details">
                            <h4>شروط خاصة بتطبيق كيتا - نظام بالطلب:</h4>
                            <ul>
                                <li>الالتزام بفتح التطبيق واستقبال الطلبات بشكل تلقائي وليس اختياري</li>
                                <li>عدم رفض أي طلب لمدة عشر ساعات يومياً</li>
                                <li>العمل بما لا يقل مجموعه عن 26 يوم بالشهر</li>
                                <li>أيام الإجازات خارج أيام الخميس والجمعة والسبت والإجازات والأعياد الرسمية</li>
                                <li>التواجد بالأحياء المتفق عليها بمدينة جدة</li>
                                <li>العمل في أوقات الذروة لفترتي الغداء والعشاء من الساعة 11 ظهراً إلى 3 فجراً</li>
                                <li>رسوم التوصيل: 10% من قيمة التسعيرة لكل طلب</li>
                                <li>قيمة السند لأمر: 5,000 ريال</li>
                            </ul>
                        </div>
                        
                        <div class="table-wrapper">
                            <h4 style="margin: 20px 0 10px;">جدول رسوم المعدات لتطبيق كيتا:</h4>
                            <table class="fees-table">
                                <thead>
                                    <tr>
                                        <th>أسماء المعدات</th>
                                        <th>دورة الحياة (شهور)</th>
                                        <th>خصم الرسوم على المعدات التالفة أو غير المرجعة (ريال)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>تي شيرت</td>
                                        <td>6</td>
                                        <td>60</td>
                                    </tr>
                                    <tr>
                                        <td>جاكيت شتوي</td>
                                        <td>24</td>
                                        <td>60</td>
                                    </tr>
                                    <tr>
                                        <td>خوذة الدراجة النارية</td>
                                        <td>36</td>
                                        <td>130</td>
                                    </tr>
                                    <tr>
                                        <td>صندوق التوصيل العادي</td>
                                        <td>24</td>
                                        <td>60</td>
                                    </tr>
                                    <tr>
                                        <td>كيس عازل الحرارة داخلي</td>
                                        <td>24</td>
                                        <td>70</td>
                                    </tr>
                                    <tr>
                                        <td>صندوق الألياف الزجاجي</td>
                                        <td>36</td>
                                        <td>800</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    `;
                    
                    additionalTerms = `
                        <h3>بنود إضافية خاصة بتطبيق كيتا:</h3>
                        <ul>
                            <li>في حال صدور مستجدات في أسلوب العمل من إدارة تطبيق كيتا بفرض غرامات جديدة أو تغيير في نظام الدورة التشغيلية يتم إشعار الطرف الثاني ويلزمه التغيير</li>
                            <li>في حالة صدور تعليمات أو تحديثات من إدارة التطبيق تكون بمثابة ملحق بالعقد</li>
                            <li>جميع البيانات الصادرة من تطبيق كيتا المتعلقة بتقييم المناديب أو العملية الحسابية ليس للطرف الأول أي علاقة أو مسؤولية عنها</li>
                            <li>دور الطرف الأول مقتصر على الوساطة بين الطرف الثاني وإدارة تطبيق كيتا</li>
                            <li>رسوم التسجيل لكل مندوب يحددها الطرف الأول</li>
                            <li>سداد المقابل المالي خلال 15-20 يوم عمل من تاريخ الفاتورة</li>
                            <li>السداد عن طريق STC PAY أو نقداً حسب المتاح</li>
                        </ul>
                    `;
                    
                    promissoryLink = `
                        <a href="#" class="promissory-link" onclick="openPromissoryNote('kita')">
                            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                            </svg>
                            تحميل السند لأمر - كيتا (5,000 ريال)
                        </a>
                    `;
                    break;
                    
                case 'jahez':
                    promissoryAmount = '2,000 ريال';
                    details = `
                        <div class="app-details">
                            <h4>شروط خاصة بتطبيق جاهز:</h4>
                            <ul>
                                <li>عمولة مقدارها (2 ريال) على كل طلب من قيمة التوصيل</li>
                                <li>تسليم المبالغ المحصلة مباشرة في حال وصولها إلى 2000 ريال</li>
                                <li>رسوم اشتراك ومستلزمات (200 ريال) غير مسترجعة</li>
                                <li>قيمة السند لأمر: 2,000 ريال</li>
                                <li>في حال التصفية سيتم تسليم الأوراق في مدة أقصاها 5 أيام عمل</li>
                            </ul>
                        </div>
                    `;
                    
                    additionalTerms = `
                        <h3>بنود إضافية خاصة بتطبيق جاهز:</h3>
                        <ul>
                            <li>يقوم الطرف الأول بصفته وسيط تشغيل لدى تطبيق جاهز بتوفير فرصة اشتراك بالعمل كمندوب توصيل متعاون</li>
                            <li>لا يترتب على الطرف الأول أي التزامات أو مسؤوليات في حال قيام الطرف الثاني بتوصيل مواد ممنوعة نظاماً</li>
                            <li>المستندات المثبتة في سجلات الطرف الأول الإلكترونية دليل قاطع لإثبات الحقوق</li>
                            <li>البيانات المدخلة من قبل الطرف الثاني صحيحة ويتحمل كامل المسؤولية في حال وجود خطأ</li>
                        </ul>
                    `;
                    
                    promissoryLink = `
                        <a href="#" class="promissory-link" onclick="openPromissoryNote('jahez')">
                            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                            </svg>
                            تحميل السند لأمر - جاهز (2,000 ريال)
                        </a>
                    `;
                    break;
                    
                case 'thechefz':
                    promissoryAmount = '5,000 ريال';
                    details = `
                        <div class="app-details">
                            <h4>شروط خاصة بتطبيق ذا شفز:</h4>
                            <ul>
                                <li>عمولة مقدارها (2 ريال) على كل طلب من قيمة التوصيل</li>
                                <li>تسليم المبالغ المحصلة مباشرة في حال وصولها إلى 5000 ريال</li>
                                <li>رسوم اشتراك ومستلزمات (200 ريال) غير مسترجعة</li>
                                <li>قيمة السند لأمر: 5,000 ريال</li>
                            </ul>
                        </div>
                    `;
                    
                    promissoryLink = `
                        <a href="#" class="promissory-link" onclick="openPromissoryNote('thechefz')">
                            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                            </svg>
                            تحميل السند لأمر - ذا شفز (5,000 ريال)
                        </a>
                    `;
                    break;
                    
                case 'mrsool':
                    promissoryAmount = 'لا يوجد';
                    details = `
                        <div class="app-details">
                            <h4>شروط خاصة بتطبيق مرسول:</h4>
                            <ul>
                                <li>260 طلب في الشهر = مكافأة قدرها 3850 ريال + توفير الإنترنت</li>
                                <li>390 طلب في الشهر = مكافأة قدرها 6000 ريال + توفير الإنترنت</li>
                                <li>450 طلب في الشهر = مكافأة قدرها 7000 ريال + توفير الإنترنت</li>
                                <li><strong style="color: var(--success-color);">لا يوجد سند لأمر لهذا التطبيق</strong></li>
                            </ul>
                        </div>
                    `;
                    
                    promissoryLink = `
                        <div class="alert alert-success" style="justify-content: center;">
                            <svg viewBox="0 0 24 24">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                            <span>لا يتطلب تطبيق مرسول توقيع سند لأمر</span>
                        </div>
                    `;
                    break;
            }
            
            if(app) {
                detailsContainer.innerHTML = details;
                detailsContainer.style.display = 'block';
                promissoryContainer.innerHTML = promissoryLink;
                
                // تحديث الملخص
                document.getElementById('summaryApp').textContent = document.querySelector(`#appSelect option[value="${app}"]`).textContent;
                document.getElementById('summaryPromissory').textContent = promissoryAmount;
                
                if(additionalTerms) {
                    additionalTermsContent.innerHTML = additionalTerms;
                    additionalTermsSection.style.display = 'block';
                } else {
                    additionalTermsSection.style.display = 'none';
                }
                
                // تحديث شريط التقدم
                updateProgress();
            } else {
                detailsContainer.style.display = 'none';
                promissoryContainer.innerHTML = '<p>يرجى اختيار التطبيق أولاً لعرض رابط السند لأمر</p>';
                additionalTermsSection.style.display = 'none';
            }
        }

        // فتح رابط السند لأمر
        function openPromissoryNote(app) {
            alert('سيتم توجيهك إلى نموذج السند لأمر الخاص بتطبيق ' + app);
            // يمكن هنا ربط الروابط الفعلية أو التكامل مع منصة نافذ
        }

        // تحديث البيانات تلقائياً
        document.addEventListener('input', function(e) {
            // تحديث حقول التوقيع
            if(e.target.id === 'fullName') {
                document.getElementById('signatureName').value = e.target.value;
            }
            if(e.target.id === 'idNumber') {
                document.getElementById('signatureId').value = e.target.value;
            }
            
            // تحديث ملخص STC Pay
            if(e.target.id === 'stcPayNumber') {
                document.getElementById('summaryStc').textContent = e.target.value || '-';
            }
            
            // تحديث شريط التقدم
            updateProgress();
        });

        // تحديث شريط التقدم
        function updateProgress() {
            const requiredFields = document.querySelectorAll('input[required], select[required]');
            const fileInputs = document.querySelectorAll('input[type="file"][required]');
            const checkboxes = document.querySelectorAll('input[type="checkbox"][required]');
            
            let filledFields = 0;
            let totalFields = requiredFields.length + fileInputs.length + checkboxes.length;
            
            requiredFields.forEach(field => {
                if(field.value) filledFields++;
            });
            
            fileInputs.forEach(input => {
                if(input.files.length > 0) filledFields++;
            });
            
            checkboxes.forEach(checkbox => {
                if(checkbox.checked) filledFields++;
            });
            
            const progress = (filledFields / totalFields) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // حفظ النموذج
        function saveForm() {
            const badge = document.getElementById('validationBadge');
            badge.classList.add('show');
            setTimeout(() => {
                badge.classList.remove('show');
            }, 3000);
        }

        // التحقق من الجوال
        let isPhoneVerified = false;
        let isFacePhotoUploaded = false;
        let verificationTimer = null;
        
        function sendVerificationCode() {
            const mobileNumber = document.getElementById('mobileNumber').value;
            
            if(!mobileNumber || mobileNumber.length < 10) {
                alert('يرجى إدخال رقم جوال صحيح (10 أرقام على الأقل)');
                return;
            }
            
            const sendButton = document.getElementById('sendCodeBtn');
            const codeInput = document.getElementById('verificationCode');
            const timerDisplay = document.getElementById('timer');
            
            // إرسال الكود
            sendButton.disabled = true;
            sendButton.textContent = 'جاري الإرسال...';
            
            // توليد كود تحقق (6 أرقام)
            window.generatedCode = Math.floor(100000 + Math.random() * 900000);
            
            // محاكاة إرسال SMS
            setTimeout(() => {
                alert(`تم إرسال كود التحقق: ${window.generatedCode}\n(في النظام الحقيقي سيتم إرساله عبر SMS)`);
                
                codeInput.disabled = false;
                codeInput.focus();
                sendButton.textContent = 'تم الإرسال ✓';
                sendButton.style.background = 'var(--success-color)';
                
                // بدء العد التنازلي (120 ثانية)
                let timeLeft = 120;
                verificationTimer = setInterval(() => {
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    timerDisplay.textContent = `⏱️ ${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    if(timeLeft <= 0) {
                        clearInterval(verificationTimer);
                        sendButton.disabled = false;
                        sendButton.textContent = 'إعادة إرسال الكود';
                        sendButton.style.background = 'var(--primary-color)';
                        timerDisplay.textContent = '';
                        window.generatedCode = null;
                    }
                    timeLeft--;
                }, 1000);
            }, 1500);
        }
        
        function verifyCode() {
            const code = document.getElementById('verificationCode').value;
            
            if(!code || code.length !== 6) {
                alert('يرجى إدخال كود التحقق المكون من 6 أرقام');
                return;
            }
            
            // التحقق من الكود
            const verifyButton = document.getElementById('verifyCodeBtn');
            verifyButton.disabled = true;
            verifyButton.textContent = 'جاري التحقق...';
            
            setTimeout(() => {
                if (window.generatedCode && code == window.generatedCode) {
                    isPhoneVerified = true;
                    verifyButton.textContent = 'تم التحقق بنجاح ✓';
                    verifyButton.style.background = 'var(--success-color)';
                    
                    // إظهار خطوة تحميل الصورة
                    document.querySelector('.face-photo-step').style.display = 'block';
                    
                    // تحديث شريط التقدم
                    updateProgress();
                    
                    if(verificationTimer) {
                        clearInterval(verificationTimer);
                        document.getElementById('timer').textContent = '';
                    }
                    
                    alert('تم التحقق من رقم الجوال بنجاح! الآن يمكنك تحميل صورة الوجه.');
                } else {
                    verifyButton.disabled = false;
                    verifyButton.textContent = 'التحقق من الكود';
                    alert('كود التحقق غير صحيح. يرجى المحاولة مرة أخرى.');
                }
            }, 1000);
        }
        
        function handleFacePhotoUpload(input) {
            const file = input.files[0];
            if(!file) return;
            
            // التحقق من نوع الملف
            if(!file.type.startsWith('image/')) {
                alert('يرجى اختيار صورة صحيحة');
                input.value = '';
                return;
            }
            
            // التحقق من حجم الملف (أقل من 5MB)
            if(file.size > 5 * 1024 * 1024) {
                alert('حجم الصورة يجب أن يكون أقل من 5 ميجابايت');
                input.value = '';
                return;
            }
            
            const uploadBox = input.closest('.file-upload-box');
            uploadBox.classList.add('has-file');
            
            const statusDiv = uploadBox.querySelector('.upload-status');
            statusDiv.innerHTML = `
                <div style="color: var(--success-color); display: flex; align-items: center; gap: 10px;">
                    <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    تم تحميل الصورة بنجاح
                </div>
            `;
            
            isFacePhotoUploaded = true;
            updateProgress();
        }
        
        // إرسال النموذج
        async function submitForm() {
            const requiredFields = document.querySelectorAll('[required]');
            const fileInputs = document.querySelectorAll('input[type="file"][required]');
            let isValid = true;
            let firstInvalid = null;
            
            // التحقق من التحقق الرقمي
            if(!isPhoneVerified) {
                alert('يرجى التحقق من رقم الجوال أولاً');
                document.getElementById('mobileNumber').scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            if(!isFacePhotoUploaded) {
                alert('يرجى تحميل صورة الوجه للتحقق من الهوية');
                document.getElementById('facePhoto').scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            // التحقق من الحقول
            requiredFields.forEach(field => {
                if(!field.value || (field.type === 'checkbox' && !field.checked)) {
                    field.style.borderColor = 'var(--danger-color)';
                    isValid = false;
                    if(!firstInvalid) firstInvalid = field;
                } else {
                    field.style.borderColor = 'var(--success-color)';
                }
            });
            
            // التحقق من الملفات
            fileInputs.forEach(input => {
                if(!input.files[0]) {
                    const box = input.closest('.file-upload-box');
                    box.style.borderColor = 'var(--danger-color)';
                    isValid = false;
                    if(!firstInvalid) firstInvalid = input;
                }
            });
            
            if(!isValid) {
                alert('يرجى تعبئة جميع الحقول المطلوبة ورفع المستندات');
                if(firstInvalid) {
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            
            const confirmMessage = `
تأكيد إرسال النموذج

يرجى مراجعة البيانات التالية:
- التطبيق: ${document.getElementById('summaryApp').textContent}
- السند لأمر: ${document.getElementById('summaryPromissory').textContent}
- حالة المستندات: ${document.getElementById('summaryDocs').textContent}
- التحقق من الجوال: ✓ تم
- صورة الوجه: ✓ تم تحميلها

هل أنت متأكد من إرسال النموذج؟
            `;
            
            if(!confirm(confirmMessage)) {
                return;
            }
            
            // إرسال البيانات إلى السيرفر
            try {
                const formData = new FormData();
                
                // إضافة البيانات الأساسية
                formData.append('fullName', document.getElementById('fullName').value);
                formData.append('idNumber', document.getElementById('idNumber').value);
                formData.append('mobileNumber', document.getElementById('mobileNumber').value);
                formData.append('stcPayNumber', document.getElementById('stcPayNumber').value);
                formData.append('selectedApp', document.getElementById('appSelect').value);
                formData.append('isPhoneVerified', isPhoneVerified);
                
                // إضافة الملفات
                const idCopyFile = document.getElementById('idCopy').files[0];
                const licenseCopyFile = document.getElementById('licenseCopy').files[0];
                const facePhotoFile = document.getElementById('facePhoto').files[0];
                
                if(idCopyFile) formData.append('idCopy', idCopyFile);
                if(licenseCopyFile) formData.append('licenseCopy', licenseCopyFile);
                if(facePhotoFile) formData.append('facePhoto', facePhotoFile);
                
                // إظهار مؤشر التحميل
                const submitButton = document.querySelector('.submit-btn');
                const originalText = submitButton.textContent;
                submitButton.disabled = true;
                submitButton.textContent = 'جاري الإرسال...';
                
                const response = await fetch('http://localhost:3001/api/register', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if(response.ok) {
                    alert('تم إرسال النموذج بنجاح! \nرقم التسجيل: ' + result.registrationId + '\nسيتم التواصل معك خلال 24-48 ساعة عمل.');
                    
                    // إعادة تعيين النموذج
                    document.getElementById('deliveryForm').reset();
                    isPhoneVerified = false;
                    isFacePhotoUploaded = false;
                    updateProgress();
                } else {
                    throw new Error(result.error || 'حدث خطأ في الإرسال');
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('حدث خطأ في إرسال النموذج. يرجى المحاولة مرة أخرى.');
            } finally {
                // إعادة تفعيل الزر
                const submitButton = document.querySelector('.submit-btn');
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }
        }
    </script>
</body>
</html>